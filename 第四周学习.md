---
   
---

# 第三周学习

## 1、github 下载过慢解决办法

- 打开hosts文件：　　　sudo vim /etc/hosts
- 在文件中添加：

```
192.30.253.112 github.com
151.101.13.194 github.global.ssl.fastly.net
103.245.222.133 assets-cdn.github.com
23.235.47.133 assets-cdn.github.com
203.208.39.104 assets-cdn.github.com
151.101.184.133 assets-cdn.github.com
204.232.175.78 documentcloud.github.com
185.199.108.153 documentcloud.github.com
204.232.175.94 gist.github.com
107.21.116.220 help.github.com
207.97.227.252 nodeload.github.com
199.27.76.130 raw.github.com
107.22.3.110 status.github.com
204.232.175.78 training.github.com
207.97.227.243 www.github.com
185.31.16.184 github.global.ssl.fastly.net
185.31.18.133 avatars0.githubusercontent.com
185.31.19.133 avatars1.githubusercontent.com
```

- 重启网络：　 sudo /etc/init.d/networking restart 
- 测试一下是否可以访问：ping github.com



# git 学习

## 一、本地使用

### git　　不能显示中文

如果你的文件名是中文的，在使用`git status`时会乱码

```
git config --global core.quotepath false`` 
```

如果 `git log` 也会乱码，执行以下命令：

```
git config --global i18n.commitencoding utf-8
git config --global i18n.logoutputencoding utf-8
```

### １　文件添加和提交

1.使用命令 git add  添加到暂存区里面去

 git add  文档名称级格式

２．把文件提交到仓库

 git commit -m　　“给提交版本起的名字”

３．　查看是否还有文件是否提交

git status

如提交过显示

On branch master
nothing to commit, working directory clean

若没有提交过显示

On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   文件名.格式

no changes added to commit (use "git add" and/or "git commit -a")　

### 2　、文件的修改

- １：修改文件内容后使用　　git status　　查看有什么变化若修改显示

On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

```
modified:   文件名.格式
```

no changes added to commit (use "git add" and/or "git commit -a")　

说明修改了文件。可以通过git  diff 查看文件做了那些变化`-`减表示删除，加号+表示添加

- 2 撤销这些更改，执行 `git checkout -- .`

### 3：版本回退：

1. 查看历史记录

   git log　　

2. 回退以前的版本

   git reset --hard HEAD^    回退到上一个版本。

   git reset --hard 　HEAD^^ 　回退到上上一个版本。

   git reset --hard HEAD~100　　回退到上１００个版本

3. 获取版本号

   git reflog

4. 　git reset --hard　‘执行git reflog得到的版本编号’  ,回到编号指定的版本

### 4.清除未追踪的文件

```
git clean -xf
```

## 二、　Github与Git的关联

### 1　创建远程仓库

１．　到Github注册账号　https://github.com/

２．　本地配置用户名和邮箱（如果已经设置好，跳过该步）：

- `git config --global user.name "你的用户名"`
  `git config --global user.email "你的邮箱"`

３　生成ssh key
运行 `ssh-keygen -t rsa -C "你的邮箱"` ，直接回车即可。

将生成的ssh key复制到剪贴板，执行 `clip < ~/.ssh/id_rsa.pub` （或者到提示的路径里去打开文件并复制）

４打开Github，进入Settings：

![Screenshot from 2018-12-26 16-18-44](/home/huangguanhua/Pictures/Screenshot from 2018-12-26 16-18-44.png)





点击左边的 SSH and GPG keys ，将ssh key粘贴到右边的Key里面。Title随便命名即可。

![1545812769367](/home/huangguanhua/Pictures/1545812769367.png)

点击下面的 `Add SSH key` 就添加成功了。

![img](https://images2015.cnblogs.com/blog/809218/201606/809218-20160604214714492-1086473957.png)

执行 `ssh -T git@github.com` ：

![1545813186244](/home/huangguanhua/Pictures/1545813186244.png)





### 2  、创建远程仓库并与本地关联

１：创建远程仓库

![1545813483079](/home/huangguanhua/Pictures/1545813483079.png)

 输入远程仓库名称点击 `Create repository` 就创建好了。![1545813510170](/home/huangguanhua/Pictures/1545813510170.png)

### 2 将远程仓库和本地仓库关联起来

先到Github上复制远程仓库的SSH地址：

![1545813786625](/home/huangguanhua/Pictures/1545813786625.png)



有两种方式可以关联，一种是SSH，一种是HTTPS。由于**HTTPS比较慢**，所以推荐使用SSH。
注意SSH的地址格式是这样开头的： `git@github.com`

运行 `git remote add origin 你复制的地址` ：

![1545813903870](/home/huangguanhua/Pictures/1545813903870.png)

如果你在创建 repository 的时候，加入了 README.md 或者 LICENSE ，那么 github 会拒绝你的 push 。你需要先执行 `git pull origin master`。

执行 `git push -u origin master` 将本地仓库上传至Github的仓库并进行关联：

![1545813955519](/home/huangguanhua/Pictures/1545813955519.png)

以后想在commit后同步到Github上，只要直接执行 `git push` 就行：

可以在Github上看到修改：

![1545814030712](/home/huangguanhua/Pictures/1545814030712.png)

### 三、git 基础操作

#### １、查看历史提交

`git log`　　　在提交了若干更新之后，又或者克隆了某个项目，想回顾下提交历史，可以使用 git log 命令查看。

`git log -p -2`　　常用 -p 选项展开显示每次提交的内容差异，用 -2 则仅显示最近的两次更新



 `git log --pretty=oneline`　　--pretty 选项，可以指定使用完全不同于默认格式的方式展示提交历史。比如用 oneline 将每个提交放在一行显示，这在提交数很大时非常有用。



`format`，可以定制要显示的记录格式，这样的输出便于后期编程提取分析

ｅｇ：

git log --pretty=format:"%h - %an, %ar : %s"

常用的格式占位符写法及其代表的意义。



| 选项  | 说明                                       |
| ----- | ------------------------------------------ |
| `%H`  | 提交对象（commit）的完整哈希字串           |
| `%h`  | 提交对象的简短哈希字串                     |
| `%T`  | 树对象（tree）的完整哈希字串               |
| `%t`  | 树对象的简短哈希字串                       |
| `%P`  | 父对象（parent）的完整哈希字串             |
| `%p`  | 父对象的简短哈希字串                       |
| `%an` | 作者（author）的名字                       |
| `%ae` | 作者的电子邮件地址                         |
| `%ad` | 作者修订日期（可以用 -date= 选项定制格式） |
| `%ar` | 作者修订日期，按多久以前的方式显示         |
| `%cn` | 提交者(committer)的名字                    |
| `%ce` | 提交者的电子邮件地址                       |
| `%cd` | 提交日期                                   |
| `%cr` | 提交日期，按多久以前的方式显示             |
| `%s`  | 提交说明                                   |



 oneline 或 format 时结合 `--graph` 选项，可以看到开头多出一些 ASCII 字符串表示的简单图形，形象地展示了每个提交所在的分支及其分化衍合情况。

git log --pretty=format:"%h %s" --graph



| 选项              | 说明                                                         |
| ----------------- | ------------------------------------------------------------ |
| `-p`              | 按补丁格式显示每个更新之间的差异。                           |
| `--word-diff`     | 按 word diff 格式显示差异。                                  |
| `--stat`          | 显示每次更新的文件修改统计信息。                             |
| `--shortstat`     | 只显示 --stat 中最后的行数修改添加移除统计。                 |
| `--name-only`     | 仅在提交信息后显示已修改的文件清单。                         |
| `--name-status`   | 显示新增、修改、删除的文件清单。                             |
| `--abbrev-commit` | 仅显示 SHA-1 的前几个字符，而非所有的 40 个字符。            |
| `--relative-date` | 使用较短的相对时间显示（比如，“2 weeks ago”）。              |
| `--graph`         | 显示 ASCII 图形表示的分支合并历史。                          |
| `--pretty`        | 使用其他格式显示历史提交信息。可用的选项包括 oneline，short，full，fuller 和 format（后跟指定格式）。 |
| `--oneline`       | `--pretty=oneline --abbrev-commit` 的简化用法。              |

限制输出长度

除了定制输出格式的选项之外，`git log` 还有许多非常实用的限制输出长度的选项，也就是只输出部分提交信息。

另外还有按照时间作限制的选项，比如 `--since` 和 `--until`。

```
$ git log --since=2.weeks
```

列出所有最近两周内的提交：

| 选项                | 说明                         |
| ------------------- | ---------------------------- |
| `-(n)`              | 仅显示最近的 n 条提交        |
| `--since, --after`  | 仅显示指定时间之后的提交。   |
| `--until, --before` | 仅显示指定时间之前的提交。   |
| `--author`          | 仅显示指定作者相关的提交。   |
| `--committer`       | 仅显示指定提交者相关的提交。 |

#### 2 使用图形化工具查阅提交历史

gitk

![1545879304060](/home/huangguanhua/.config/Typora/typora-user-images/1545879304060.png)







#### 3 撤销操作

修改最后一次提交

有时候我们提交完了才发现漏掉了几个文件没有加，或者提交信息写错了。想要撤消刚才的提交操作，可以使用 `--amend` 选项重新提交：

git commit --amend

12